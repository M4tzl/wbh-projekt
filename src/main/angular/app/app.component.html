<nav *ngIf="!widgetMode" class="navbar navbar-expand-md navbar-light fixed-top tfm">

    <a class="navbar-brand" href="#"><img src="assets/img/logo-quer-40px.png"><span class="sr-only">(current)</span></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
            aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse " id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
            <li *ngIf="currentUser?.isVermittler; else noVermittlerInserate" class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="vermittlerInserateDropdown" href="#" role="button"
                   data-toggle="dropdown"
                   aria-haspopup="true"
                   aria-expanded="false">Inserate</a>
                <div class="dropdown-menu" aria-labelledby="vermittlerInserateDropdown" data-toggle="collapse"
                     data-target=".navbar-collapse.show">
                    <a class="dropdown-item" routerLink="/inserate/such-maske">Inserate suchen</a>
                    <a class="dropdown-item" routerLink="/inserate/manage">Meine Inserate verwalten</a>
                    <a class="dropdown-item" routerLink="/inserate/create">Neues Inserat anlegen</a>
                </div>
            </li>
            <ng-template #noVermittlerInserate>
                <li class="nav-item " data-toggle="collapse" data-target=".navbar-collapse.show">
                    <a class="nav-link" routerLink="/inserate/such-maske">Inserate</a>
                </li>
            </ng-template>

            <li *ngIf="currentUser?.isInteressent; else noInteressent" class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="interessenStoriesDropdown" href="#" role="button"
                   data-toggle="dropdown"
                   aria-haspopup="true"
                   aria-expanded="false">Stories</a>
                <div class="dropdown-menu" aria-labelledby="interessenStoriesDropdown" data-toggle="collapse"
                     data-target=".navbar-collapse.show">
                    <a class="dropdown-item" routerLink="/stories">Stories suchen</a>
                    <a class="dropdown-item" routerLink="/open-stories">Offene Story anlegen</a>
                </div>
            </li>
            <ng-template #noInteressent>
                <li class="nav-item" data-toggle="collapse" data-target=".navbar-collapse.show">
                    <a class="nav-link" routerLink="/stories">Stories</a>
                </li>
            </ng-template>

            <li *ngIf="currentUser?.isAdmin" class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="adminDropdown" href="#" role="button"
                   data-toggle="dropdown"
                   aria-haspopup="true"
                   aria-expanded="false">Admin</a>
                <div class="dropdown-menu" aria-labelledby="adminDropdown" data-toggle="collapse"
                     data-target=".navbar-collapse.show">
                    <a class="dropdown-item" routerLink="/inserate/manage">Inserate</a>
                    <a class="dropdown-item" routerLink="/stories">Stories</a>
                </div>
            </li>
        </ul>

        <ul *ngIf="currentUser && currentUser.loggedIn; else loggedOut" class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="accountDropdown" href="#" role="button" data-toggle="dropdown"
                   aria-haspopup="true"
                   aria-expanded="false">{{currentUser.userName}}</a>
                <div class="dropdown-menu" aria-labelledby="accountDropdown" data-toggle="collapse"
                     data-target=".navbar-collapse.show">
                    <a class="dropdown-item" *ngIf="currentUser.isVermittler" routerLink="/vermittler/update-data">Daten bearbeiten</a>
                    <a class="dropdown-item" *ngIf="currentUser.isInteressent" routerLink="/interessent/update-data">Daten bearbeiten</a>
                    <a class="dropdown-item" (click)="logout()" href="#" data-toggle="collapse"
                       data-target=".navbar-collapse.show">Abmelden</a>
                </div>
            </li>
        </ul>

        <ng-template #loggedOut>
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Registrierung</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" data-toggle="collapse"
                         data-target=".navbar-collapse.show">
                        <a class="dropdown-item" routerLink="/interessent/register">für Interessenten</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" routerLink="/vermittler/register">für Vermittler</a>
                    </div>
                </li>
                <li class="nav-item " data-toggle="collapse" data-target=".navbar-collapse.show">
                    <a class="nav-link" routerLink="/login">Anmelden</a>
                </li>
            </ul>
        </ng-template>
    </div>
</nav>

<main role="main" class="container-fluid p-0 pt-5 pb-6">

    <div class="starter-template">
        <div class="alert alert-danger" role="alert" *ngIf="showConnectionError">
            <span>Es besteht ein Verbindungsproblem zum Server. Bitte probieren Sie es später noch einmal!</span>
        </div>

        <router-outlet></router-outlet>
    </div>

</main><!-- /.container -->

<!-- Footer -->
<footer *ngIf="!widgetMode" class="page-footer font-small fixed-bottom">
    <!-- Footer Links -->
    <div class="container text-center">
        <!-- Grid row -->
        <div class="row ">
            <span class="clearfix w-100"></span>
            <!-- Grid column -->
            <div class="col-4 col-md-4 ">
                <ul class="m-0 p-0 list-unstyled">
                    <li>
                        <a routerLink="/faq">FAQ</a>
                    </li>
                </ul>
            </div>
            <div class="col-4 col-md-4 ">
                <ul class="m-0 p-0 list-unstyled">
                    <li>
                        <a routerLink="/datenschutz">Datenschutz</a>
                    </li>
                </ul>
            </div>
            <div class="col-4 col-md-4">
                <ul class="m-0 p-0 list-unstyled">
                    <li>
                        <a routerLink="/impressum">Impressum</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Grid row -->
    </div>
    <!-- Footer Links -->
    <div class="footer-copyright text-center">&copy; 2018 Copyright: TFM &nbsp;</div>
</footer>
<!-- Footer -->
